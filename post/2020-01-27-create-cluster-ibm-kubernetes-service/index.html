<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자! | chhanz 기술 블로그
</title>
<meta name="keywords" content="kubernetes, cloud">
<meta name="description" content=" ">
<meta name="author" content="chhanz">
<link rel="canonical" href="https://chhanz88.github.io/post/post/2020-01-27-create-cluster-ibm-kubernetes-service/">
<link crossorigin="anonymous" href="/post/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css" integrity="sha256-7I2jZsovtkdTfMt6j2&#43;ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/post/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" type="image/png" href="https://chhanz88.github.io/post/favicon.ico">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!" />
<meta property="og:description" content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chhanz88.github.io/post/post/2020-01-27-create-cluster-ibm-kubernetes-service/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-01-27T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-01-27T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!"/>
<meta name="twitter:description" content=" "/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://chhanz88.github.io/post/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!",
      "item": "https://chhanz88.github.io/post/post/2020-01-27-create-cluster-ibm-kubernetes-service/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!",
  "name": "[Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!",
  "description": " ",
  "keywords": [
    "kubernetes", "cloud"
  ],
  "articleBody": "목차  IBM Cloud Kubernetes Service 생성 IBM Cloud Cli 및 Kubectl 설치 Deploy Sample Service Delete Kubernetes Cluster 참고 자료  관리형 Kubernetes Service  각 Public Cloud Provider 에서는 관리형 Kubernetes Service를 제공하고 있습니다.\nAWS 에서는 Amazon Elastic Kubernetes Service(AWS EKS),\nAzure 에서는 Azure Kubernetes Service(AKS)의 이름으로 서비스를 하고 있으며,\nIBM 에서는 IBM Cloud Kubernetes Service(IKS) 라는 서비스를 제공하고 있습니다.\n 이번 포스팅에서는 무료로 관리형 Kubernetes 서비스를 이용 할 수 있는 IBM Cloud Kubernetes Service(이하 IKS) 를 이용하여\nCluster 를 생성하고 Sample 서비스를 배포해보도록 하겠습니다.\nIBM Cloud Kubernetes Service 생성 IKS 서비스 생성을 위해서는 IBM Cloud 계정 생성이 필요하며, 해당 계정에 신용카드 등록이 필요합니다.\n(신용카드 등록은 하지만 Free 요금제 사용으로 추가 과금은 없습니다.)\n또한 IKS Free 요금제의 경우, Cluster 의 사용 기간이 한달이며, 한달 후엔 Cluster 사용이 중지됩니다.\nIBM Cloud Cli 및 Kubectl 설치 IBM Cloud Cli 설치에 사용되는 운영체제는 CentOS 7.7 을 사용 하였습니다.\n IBM Cloud Cli 설치  $ curl -sL https://ibm.biz/idt-installer | bash 자동으로 필요한 패키지 설치합니다.\n설치가 완료된 후, ssh 재접속을 하면 ibmcloud(ic) 라는 명령어가 사용 가능합니다.\n[root@fastvm-centos-7-7-31 ~]# ic NAME:  ibmcloud - A command line tool to interact with IBM Cloud  Find more information at: https://ibm.biz/cli-docs  USAGE:  [environment variables] ibmcloud [global options] command [arguments...] [command options]  VERSION:  0.22.0+5ccbbea-2020-01-21T09:34:49+00:00  COMMANDS:  api Set or view target API endpoint  login Log user in  target Set or view the targeted region, account, resource group, org or space  config Write default values to the config  update Update CLI to the latest version  logout Log user out  regions List all the regions  version Print the version  resource Manage resource groups and resources  iam Manage identities and access to resources  dev Create, develop, deploy, and monitor applications  app [Deprecated] Manage Cloud Foundry applications and application related domains and routes.  service [Deprecated] Manage Cloud Foundry services.  billing Retrieve usage and billing information  plugin Manage plug-ins and plug-in repositories  cf Run Cloud Foundry CLI with IBM Cloud CLI context  catalog Manage catalog  account Manage accounts, users, orgs and spaces  enterprise Manage enterprise, account groups and accounts.  cfee Manage Cloud Foundry Enterprise Environments  cloud-functions, wsk, functions, fn Manage Cloud Functions  cos Interact with IBM Cloud Object Storage services  cr Manage IBM Cloud Container Registry content and configuration.  cs, ks, oc Manage IBM Cloud Kubernetes Service clusters.  sl Manage Classic infrastructure services  help, h Show help  Enter 'ibmcloud help [command]' for more information about a command.  ENVIRONMENT VARIABLES:  IBMCLOUD_COLOR=false Do not colorize output  IBMCLOUD_ANALYTICS=false Do not collect usage statistics for analytics  IBMCLOUD_VERSION_CHECK=false Do not check latest version for update  IBMCLOUD_HTTP_TIMEOUT=5 A time limit for HTTP requests  IBMCLOUD_API_KEY=api_key_value API Key used for login  IBMCLOUD_TRACE=true Print API request diagnostics to stdout  IBMCLOUD_TRACE=path/to/trace.log Append API request diagnostics to a log file  IBMCLOUD_HOME=path/to/dir Path to config directory  GLOBAL OPTIONS:  --version, -v Print the version  --help, -h Show help  [root@fastvm-centos-7-7-31 ~]#  Login IBM Cloud\n아래 명령을 입력하여 Login 을 합니다.  $ ibmcloud login -a cloud.ibm.com -r us-south 아래와 같은 Login 과정이 필요합니다.\n[root@fastvm-centos-7-7-31 ~]# ibmcloud login -a cloud.ibm.com -r us-south API endpoint: https://cloud.ibm.com  Email \"계정명@이메일\"  Password \"패스워드\" Authenticating... OK  Targeted account CheolHee Han`s Account (\"Account ID\")  \"Account ID\"  Targeted region us-south   API endpoint: https://cloud.ibm.com Region: us-south User: \"계정명@이메일\" Account: CheolHee Han`s Account (\"Account ID\")  \"Account ID\" Resource group: No resource group targeted, use 'ibmcloud target -g RESOURCE_GROUP' CF API endpoint: Org: Space:  Tip: If you are managing Cloud Foundry applications and services - Use 'ibmcloud target --cf' to target Cloud Foundry org/space interactively, or use 'ibmcloud target --cf-api ENDPOINT -o ORG -s SPACE' to target the org/space. - Use 'ibmcloud cf' if you want to run the Cloud Foundry CLI with current IBM Cloud CLI context.  Kubeconfig 설정\n아래 명령을 입력하고 생성된 Export 명령을 입력합니다.  [root@fastvm-centos-7-7-31 ~]# ibmcloud ks cluster config --cluster \"IKS Cluster ID\" Kubernetes version 1.16 has removed deprecated APIs. For more information, see   If you have clusters that run Kubernetes versions 1.11, 1.12 or 1.13, update them now to continue receiving important security updates and support. Kubernetes version 1.13 is deprecated and will be unsupported 22 February 2020. Versions 1.12 and earlier are already unsupported. For more information and update actions, see   WARNING: The behavior of this command in your current CLI version is deprecated, and becomes unsupported when CLI version 1.0 is released in March 2020. To use the new behavior now, set the 'IKS_BETA_VERSION' environment variable. In bash, run 'export IKS_BETA_VERSION=1'. Note: Changing the beta version can include other breaking changes. For more information, see http://ibm.biz/iks-cli-v1  OK The configuration for \"IKS Cluster ID\" was downloaded successfully.  Export environment variables to start using Kubernetes.  export KUBECONFIG=/root/.bluemix/plugins/container-service/clusters/\"IKS Cluster ID\"/kube-config-hou02-chhanz-kubecluster.yml  [root@fastvm-centos-7-7-31 ~]# export KUBECONFIG=/root/.bluemix/plugins/container-service/clusters/\"IKS Cluster ID\"/kube-config-hou02-chhanz-kubecluster.yml  Kubernetes 상태 확인\n아래와 같이 kubectl 명령을 통해 확인이 가능합니다.  [root@fastvm-centos-7-7-31 ~]# kubectl get nodes NAME STATUS ROLES AGE VERSION 10.76.68.233 Ready  107s v1.15.8+IKS [root@fastvm-centos-7-7-31 ~]# Deploy Sample Service IKS 에 Web 서비스를 올려보도록 하겠습니다.\n sample-httpd 배포\n아래와 같이 sample-httpd Container 이미지를 IKS 에 배포합니다.  [root@fastvm-centos-7-7-31 ~]# kubectl run sample-httpd --image=han0495/sample-httpd  kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead. deployment.apps/sample-httpd created  [root@fastvm-centos-7-7-31 ~]# kubectl get all NAME READY STATUS RESTARTS AGE pod/sample-httpd-86b74f6f64-7gcmj 1/1 Running 0 7s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 172.21.0.1  443/TCP 33m  NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/sample-httpd 1/1 1 1 8s  NAME DESIRED CURRENT READY AGE replicaset.apps/sample-httpd-86b74f6f64 1 1 1 8s  Expose Service\n아래 명령을 통해 sample-httpd 를 외부에 서비스 가능하도록 svc 를 생성합니다.  [root@fastvm-centos-7-7-31 ~]# kubectl expose deployment.apps/sample-httpd --port=80 --type=NodePort service/sample-httpd exposed  [root@fastvm-centos-7-7-31 ~]# kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 172.21.0.1  443/TCP 37m sample-httpd NodePort 172.21.162.229  80:31154/TCP 5s 완료'  접속 테스트\nIKS Cluster 메뉴에서 Worker nodes 에서 Public IP 확인이 가능합니다.  Delete Kubernetes Cluster 참고 자료  Source 자료  sample-httpd-github : https://github.com/chhanz/sample-httpd-example   Docker Image 정보  sample-httpd-dockerhub : https://hub.docker.com/r/han0495/sample-httpd    ",
  "wordCount" : "960",
  "inLanguage": "en",
  "datePublished": "2020-01-27T00:00:00Z",
  "dateModified": "2020-01-27T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "chhanz"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chhanz88.github.io/post/post/2020-01-27-create-cluster-ibm-kubernetes-service/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "chhanz 기술 블로그\n",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chhanz88.github.io/post/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://chhanz88.github.io/post/" accesskey="h" title="chhanz 기술 블로그
 (Alt + H)">chhanz 기술 블로그
</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://chhanz88.github.io/post/archives" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://chhanz88.github.io/post/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      [Kubernetes] IBM Cloud Kubernetes Service 를 Free Tier 로 사용해보자!
    </h1>
    <div class="post-description">
       
    </div>
    <div class="post-meta"><span title='2020-01-27 00:00:00 +0000 UTC'>January 27, 2020</span>&nbsp;·&nbsp;chhanz

</div>
  </header> 
  <div class="post-content"><h1 id="목차">목차<a hidden class="anchor" aria-hidden="true" href="#목차">#</a></h1>
<ul>
<li><a href="#ibm-cloud-kubernetes-service-%EC%83%9D%EC%84%B1">IBM Cloud Kubernetes Service 생성</a></li>
<li><a href="#ibm-cloud-cli-%EB%B0%8F-kubectl-%EC%84%A4%EC%B9%98">IBM Cloud Cli 및 Kubectl 설치</a></li>
<li><a href="#deploy-sample-service">Deploy Sample Service</a></li>
<li><a href="#delete-kubernetes-cluster">Delete Kubernetes Cluster</a></li>
<li><a href="#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C">참고 자료</a></li>
</ul>
<h1 id="관리형-kubernetes-service">관리형 Kubernetes Service<a hidden class="anchor" aria-hidden="true" href="#관리형-kubernetes-service">#</a></h1>
<blockquote>
<p>각 Public Cloud Provider 에서는 관리형 Kubernetes Service를 제공하고 있습니다.<br>
<code>AWS</code> 에서는 Amazon Elastic Kubernetes Service(<a href="https://aws.amazon.com/ko/eks/"><code>AWS EKS</code></a>),<br>
<code>Azure</code> 에서는 Azure Kubernetes Service(<a href="https://azure.microsoft.com/ko-kr/services/kubernetes-service/"><code>AKS</code></a>)의 이름으로 서비스를 하고 있으며,<br>
<code>IBM</code> 에서는 IBM Cloud Kubernetes Service(<a href="https://www.ibm.com/kr-ko/cloud/container-service"><code>IKS</code></a>) 라는 서비스를 제공하고 있습니다.</p>
</blockquote>
<p>이번 포스팅에서는 무료로 관리형 Kubernetes 서비스를 이용 할 수 있는 <code>IBM Cloud Kubernetes Service</code>(이하 <code>IKS</code>) 를 이용하여<br>
Cluster 를 생성하고 Sample 서비스를 배포해보도록 하겠습니다.</p>
<h1 id="ibm-cloud-kubernetes-service-생성">IBM Cloud Kubernetes Service 생성<a hidden class="anchor" aria-hidden="true" href="#ibm-cloud-kubernetes-service-생성">#</a></h1>
<p>IKS 서비스 생성을 위해서는 IBM Cloud 계정 생성이 필요하며, 해당 계정에 신용카드 등록이 필요합니다.<br>
(신용카드 등록은 하지만 <code>Free</code> 요금제 사용으로 추가 과금은 없습니다.)<br>
또한 <code>IKS</code> <code>Free</code> 요금제의 경우, Cluster 의 사용 기간이 한달이며, 한달 후엔 Cluster 사용이 중지됩니다.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="ibm-cloud-cli-및-kubectl-설치">IBM Cloud Cli 및 Kubectl 설치<a hidden class="anchor" aria-hidden="true" href="#ibm-cloud-cli-및-kubectl-설치">#</a></h1>
<p>IBM Cloud Cli 설치에 사용되는 운영체제는 <code>CentOS 7.7</code> 을 사용 하였습니다.</p>
<ul>
<li>IBM Cloud Cli 설치</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -sL https://ibm.biz/idt-installer | bash 
</span></span></code></pre></div><p>자동으로 필요한 패키지 설치합니다.<br>
설치가 완료된 후, ssh 재접속을 하면 <code>ibmcloud(ic)</code> 라는 명령어가 사용 가능합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># ic</span>
</span></span><span style="display:flex;"><span>NAME:
</span></span><span style="display:flex;"><span>  ibmcloud - A command line tool to interact with IBM Cloud
</span></span><span style="display:flex;"><span>  Find more information at: https://ibm.biz/cli-docs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>USAGE:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>environment variables<span style="color:#f92672">]</span> ibmcloud <span style="color:#f92672">[</span>global options<span style="color:#f92672">]</span> command <span style="color:#f92672">[</span>arguments...<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>command options<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>VERSION:
</span></span><span style="display:flex;"><span>  0.22.0+5ccbbea-2020-01-21T09:34:49+00:00
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>COMMANDS:
</span></span><span style="display:flex;"><span>  api                                   Set or view target API endpoint
</span></span><span style="display:flex;"><span>  login                                 Log user in
</span></span><span style="display:flex;"><span>  target                                Set or view the targeted region, account, resource group, org or space
</span></span><span style="display:flex;"><span>  config                                Write default values to the config
</span></span><span style="display:flex;"><span>  update                                Update CLI to the latest version
</span></span><span style="display:flex;"><span>  logout                                Log user out
</span></span><span style="display:flex;"><span>  regions                               List all the regions
</span></span><span style="display:flex;"><span>  version                               Print the version
</span></span><span style="display:flex;"><span>  resource                              Manage resource groups and resources
</span></span><span style="display:flex;"><span>  iam                                   Manage identities and access to resources
</span></span><span style="display:flex;"><span>  dev                                   Create, develop, deploy, and monitor applications
</span></span><span style="display:flex;"><span>  app                                   <span style="color:#f92672">[</span>Deprecated<span style="color:#f92672">]</span> Manage Cloud Foundry applications and application related domains and routes.
</span></span><span style="display:flex;"><span>  service                               <span style="color:#f92672">[</span>Deprecated<span style="color:#f92672">]</span> Manage Cloud Foundry services.
</span></span><span style="display:flex;"><span>  billing                               Retrieve usage and billing information
</span></span><span style="display:flex;"><span>  plugin                                Manage plug-ins and plug-in repositories
</span></span><span style="display:flex;"><span>  cf                                    Run Cloud Foundry CLI with IBM Cloud CLI context
</span></span><span style="display:flex;"><span>  catalog                               Manage catalog
</span></span><span style="display:flex;"><span>  account                               Manage accounts, users, orgs and spaces
</span></span><span style="display:flex;"><span>  enterprise                            Manage enterprise, account groups and accounts.
</span></span><span style="display:flex;"><span>  cfee                                  Manage Cloud Foundry Enterprise Environments
</span></span><span style="display:flex;"><span>  cloud-functions, wsk, functions, fn   Manage Cloud Functions
</span></span><span style="display:flex;"><span>  cos                                   Interact with IBM Cloud Object Storage services
</span></span><span style="display:flex;"><span>  cr                                    Manage IBM Cloud Container Registry content and configuration.
</span></span><span style="display:flex;"><span>  cs, ks, oc                            Manage IBM Cloud Kubernetes Service clusters.
</span></span><span style="display:flex;"><span>  sl                                    Manage Classic infrastructure services
</span></span><span style="display:flex;"><span>  help, h                               Show help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Enter <span style="color:#e6db74">&#39;ibmcloud help [command]&#39;</span> <span style="color:#66d9ef">for</span> more information about a command.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ENVIRONMENT VARIABLES:
</span></span><span style="display:flex;"><span>  IBMCLOUD_COLOR<span style="color:#f92672">=</span>false                     Do not colorize output
</span></span><span style="display:flex;"><span>  IBMCLOUD_ANALYTICS<span style="color:#f92672">=</span>false                 Do not collect usage statistics <span style="color:#66d9ef">for</span> analytics
</span></span><span style="display:flex;"><span>  IBMCLOUD_VERSION_CHECK<span style="color:#f92672">=</span>false             Do not check latest version <span style="color:#66d9ef">for</span> update
</span></span><span style="display:flex;"><span>  IBMCLOUD_HTTP_TIMEOUT<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>                  A time limit <span style="color:#66d9ef">for</span> HTTP requests
</span></span><span style="display:flex;"><span>  IBMCLOUD_API_KEY<span style="color:#f92672">=</span>api_key_value           API Key used <span style="color:#66d9ef">for</span> login
</span></span><span style="display:flex;"><span>  IBMCLOUD_TRACE<span style="color:#f92672">=</span>true                      Print API request diagnostics to stdout
</span></span><span style="display:flex;"><span>  IBMCLOUD_TRACE<span style="color:#f92672">=</span>path/to/trace.log         Append API request diagnostics to a log file
</span></span><span style="display:flex;"><span>  IBMCLOUD_HOME<span style="color:#f92672">=</span>path/to/dir                Path to config directory
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GLOBAL OPTIONS:
</span></span><span style="display:flex;"><span>  --version, -v                      Print the version
</span></span><span style="display:flex;"><span>  --help, -h                         Show help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</span></span></code></pre></div><ul>
<li>Login IBM Cloud<br>
아래 명령을 입력하여 Login 을 합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ibmcloud login -a cloud.ibm.com -r us-south
</span></span></code></pre></div><p>아래와 같은 Login 과정이 필요합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># ibmcloud login -a cloud.ibm.com -r us-south</span>
</span></span><span style="display:flex;"><span>API endpoint: https://cloud.ibm.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Email&gt; <span style="color:#e6db74">&#34;계정명@이메일&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Password&gt; <span style="color:#e6db74">&#34;패스워드&#34;</span>
</span></span><span style="display:flex;"><span>Authenticating...
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Targeted account CheolHee Han<span style="color:#e6db74">`</span>s Account <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Account ID&#34;</span><span style="color:#f92672">)</span> &lt;-&gt; <span style="color:#e6db74">&#34;Account ID&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Targeted region us-south
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>API endpoint:      https://cloud.ibm.com
</span></span><span style="display:flex;"><span>Region:            us-south
</span></span><span style="display:flex;"><span>User:              <span style="color:#e6db74">&#34;계정명@이메일&#34;</span>
</span></span><span style="display:flex;"><span>Account:           CheolHee Han<span style="color:#e6db74">`</span>s Account <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Account ID&#34;</span><span style="color:#f92672">)</span> &lt;-&gt; <span style="color:#e6db74">&#34;Account ID&#34;</span>
</span></span><span style="display:flex;"><span>Resource group:    No resource group targeted, use <span style="color:#e6db74">&#39;ibmcloud target -g RESOURCE_GROUP&#39;</span>
</span></span><span style="display:flex;"><span>CF API endpoint:
</span></span><span style="display:flex;"><span>Org:
</span></span><span style="display:flex;"><span>Space:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Tip: If you are managing Cloud Foundry applications and services
</span></span><span style="display:flex;"><span>- Use <span style="color:#e6db74">&#39;ibmcloud target --cf&#39;</span> to target Cloud Foundry org/space interactively, or use <span style="color:#e6db74">&#39;ibmcloud target --cf-api ENDPOINT -o ORG -s SPACE&#39;</span> to target the org/space.
</span></span><span style="display:flex;"><span>- Use <span style="color:#e6db74">&#39;ibmcloud cf&#39;</span> <span style="color:#66d9ef">if</span> you want to run the Cloud Foundry CLI with current IBM Cloud CLI context.
</span></span></code></pre></div><ul>
<li><code>Kubeconfig</code> 설정<br>
아래 명령을 입력하고 생성된 Export 명령을 입력합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># ibmcloud ks cluster config --cluster &#34;IKS Cluster ID&#34;</span>
</span></span><span style="display:flex;"><span>Kubernetes version 1.16 has removed deprecated APIs. For more information, see &lt;http://ibm.biz/k8s-1-16-apis&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>If you have clusters that run Kubernetes versions 1.11, 1.12 or 1.13, update them now to <span style="color:#66d9ef">continue</span> receiving important security updates and support. Kubernetes version 1.13 is deprecated and will be unsupported <span style="color:#ae81ff">22</span> February 2020. Versions 1.12 and earlier are already unsupported. For more information and update actions, see &lt;https://ibm.biz/iks-versions&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>WARNING: The behavior of this command in your current CLI version is deprecated, and becomes unsupported when CLI version 1.0 is released in March 2020. To use the new behavior now, set the <span style="color:#e6db74">&#39;IKS_BETA_VERSION&#39;</span> environment variable. In bash, run <span style="color:#e6db74">&#39;export IKS_BETA_VERSION=1&#39;</span>.
</span></span><span style="display:flex;"><span>Note: Changing the beta version can include other breaking changes. For more information, see http://ibm.biz/iks-cli-v1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>The configuration <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#34;IKS Cluster ID&#34;</span> was downloaded successfully.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Export environment variables to start using Kubernetes.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export KUBECONFIG<span style="color:#f92672">=</span>/root/.bluemix/plugins/container-service/clusters/<span style="color:#e6db74">&#34;IKS Cluster ID&#34;</span>/kube-config-hou02-chhanz-kubecluster.yml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># export KUBECONFIG=/root/.bluemix/plugins/container-service/clusters/&#34;IKS Cluster ID&#34;/kube-config-hou02-chhanz-kubecluster.yml</span>
</span></span></code></pre></div><ul>
<li>Kubernetes 상태 확인<br>
아래와 같이 <code>kubectl</code> 명령을 통해 확인이 가능합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get nodes</span>
</span></span><span style="display:flex;"><span>NAME           STATUS   ROLES    AGE    VERSION
</span></span><span style="display:flex;"><span>10.76.68.233   Ready    &lt;none&gt;   107s   v1.15.8+IKS
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</span></span></code></pre></div><h1 id="deploy-sample-service">Deploy Sample Service<a hidden class="anchor" aria-hidden="true" href="#deploy-sample-service">#</a></h1>
<p><code>IKS</code> 에 Web 서비스를 올려보도록 하겠습니다.</p>
<ul>
<li><code>sample-httpd</code> 배포<br>
아래와 같이 <code>sample-httpd</code> Container 이미지를 <code>IKS</code> 에 배포합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl run sample-httpd --image=han0495/sample-httpd </span>
</span></span><span style="display:flex;"><span>kubectl run --generator<span style="color:#f92672">=</span>deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator<span style="color:#f92672">=</span>run-pod/v1 or kubectl create instead.
</span></span><span style="display:flex;"><span>deployment.apps/sample-httpd created
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get all</span>
</span></span><span style="display:flex;"><span>NAME                                READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>pod/sample-httpd-86b74f6f64-7gcmj   1/1     Running   <span style="color:#ae81ff">0</span>          7s   <span style="color:#e6db74">&lt;&lt; &#39;Pod 배포 완료&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">NAME                 TYP</span>E        CLUSTER-IP   EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>   AGE
</span></span><span style="display:flex;"><span>service/kubernetes   ClusterIP   172.21.0.1   &lt;none&gt;        443/TCP   33m
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>deployment.apps/sample-httpd   1/1     <span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">1</span>           8s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                                      DESIRED   CURRENT   READY   AGE
</span></span><span style="display:flex;"><span>replicaset.apps/sample-httpd-86b74f6f64   <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>       8s
</span></span></code></pre></div><ul>
<li>Expose Service<br>
아래 명령을 통해 <code>sample-httpd</code> 를 외부에 서비스 가능하도록 <code>svc</code> 를 생성합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl expose deployment.apps/sample-httpd --port=80 --type=NodePort</span>
</span></span><span style="display:flex;"><span>service/sample-httpd exposed
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-31 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get svc</span>
</span></span><span style="display:flex;"><span>NAME           TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>        AGE
</span></span><span style="display:flex;"><span>kubernetes     ClusterIP   172.21.0.1       &lt;none&gt;        443/TCP        37m
</span></span><span style="display:flex;"><span>sample-httpd   NodePort    172.21.162.229   &lt;none&gt;        80:31154/TCP   5s     <span style="color:#e6db74">&lt;&lt; &#39;expose</span> 완료<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span></code></pre></div><ul>
<li>접속 테스트<br>
<!-- raw HTML omitted --><br>
<code>IKS</code> Cluster 메뉴에서 Worker nodes 에서 <code>Public IP</code> 확인이 가능합니다.</li>
</ul>
<!-- raw HTML omitted -->
<h1 id="delete-kubernetes-cluster">Delete Kubernetes Cluster<a hidden class="anchor" aria-hidden="true" href="#delete-kubernetes-cluster">#</a></h1>
<!-- raw HTML omitted -->
<h1 id="참고-자료">참고 자료<a hidden class="anchor" aria-hidden="true" href="#참고-자료">#</a></h1>
<ul>
<li>Source 자료
<ul>
<li><code>sample-httpd-github</code> : <a href="https://github.com/chhanz/sample-httpd-example">https://github.com/chhanz/sample-httpd-example</a></li>
</ul>
</li>
<li>Docker Image 정보
<ul>
<li><code>sample-httpd-dockerhub</code> : <a href="https://hub.docker.com/r/han0495/sample-httpd">https://hub.docker.com/r/han0495/sample-httpd</a></li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://chhanz88.github.io/post/tags/kubernetes/">kubernetes</a></li>
      <li><a href="https://chhanz88.github.io/post/tags/cloud/">cloud</a></li>
    </ul>
  </footer><script src="https://utteranc.es/client.js"
        repo="chhanz88/chhanz88.github.io"
        issue-term="title"
        label="question"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://chhanz88.github.io/post/">chhanz 기술 블로그
</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
