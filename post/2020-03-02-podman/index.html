<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[Container] Podman 설치 및 사용법 | chhanz 기술 블로그
</title>
<meta name="keywords" content="container">
<meta name="description" content=" ">
<meta name="author" content="chhanz">
<link rel="canonical" href="https://chhanz88.github.io/post/2020-03-02-podman/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css" integrity="sha256-7I2jZsovtkdTfMt6j2&#43;ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" type="image/png" href="https://chhanz88.github.io/assets/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://chhanz88.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://chhanz88.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://chhanz88.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://chhanz88.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="[Container] Podman 설치 및 사용법" />
<meta property="og:description" content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chhanz88.github.io/post/2020-03-02-podman/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-03-02T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-03-02T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Container] Podman 설치 및 사용법"/>
<meta name="twitter:description" content=" "/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://chhanz88.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "[Container] Podman 설치 및 사용법",
      "item": "https://chhanz88.github.io/post/2020-03-02-podman/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[Container] Podman 설치 및 사용법",
  "name": "[Container] Podman 설치 및 사용법",
  "description": " ",
  "keywords": [
    "container"
  ],
  "articleBody": "Podman 이란? Red Hat Enterprise Linux 8 / CentOS 8 부터는 Docker 대신 Podman 이라는 도구를 제공합니다.\nPodman 은 Docker 와 동일하게 단일 노드에서 pod, 컨테이너 이미지 및 컨테이너를 관리합니다.\nPod 라고 하는 컨테이너 및 컨테이너 그룹을 관리할 수 있는 libpod 라이브러리를 기반으로 합니다.\n RHEL 8 Release Note  이번 포스팅에서는 Podman 의 설치 및 기본 사용법에 대해 확인 해보겠습니다.\nDocker VS Podman Docker 와 Podman 은 아래와 같이 “컨테이너 Cli 가 컨테이너를 어떻게 생성하냐” 의 차이가 있습니다.\n- Docker 구조 -- Podman 구조 -위와 같은 구조적인 차이로 인해 예전에 Docker 에서는 systemd 를 이용하여 docker daemon을 재시작 하거나 중지를 하면 운영중인 컨테이너에 영향을 주었습니다.\n하지만 Podman 은 Docker 와 달리 서로 간섭이 없는 컨테이너를 생성 할 수 있습니다.\n일종의 PID 가 다른 프로세서라고 생각하면 됩니다.\nPodman 설치 Podman 설치는 Docker 설치 만큼 쉽습니다.\n참고로 현재 CentOS 7 에서는 Docker 와 Podman 을 동시에 지원하니 기존에 Docker 로 쓰던 컨테이너를 Podman 으로도 전환이 가능합니다.\n[root@fastvm-centos-7-7-41 ~]# yum -y install podman 위와 같이 명령 수행만 하면 설치는 완료됩니다.\n설치만 보면 Docker 보다 쉽습니다. 특이한 점은 systemd 설정 할 필요가 없습니다.\n[root@fastvm-centos-7-7-41 ~]# systemctl list-units | grep -i pod [root@fastvm-centos-7-7-41 ~]# 위와 같이 Docker 와 다르게 systemd 로 서비스를 시작할 필요가 없습니다.\nPodman 기본 사용법 Podman 의 기본 사용법을 알아보겠습니다.\n컨테이너 생성 [root@fastvm-centos-7-7-41 ~]# podman run --help Run a command in a new container Description:  Runs a command in a new container from the given image Usage:  podman run [flags] IMAGE [COMMAND [ARG...]] 위와 같은 구문을 이용하여 아래와 같이 컨테이너 생성이 가능합니다.\n[root@fastvm-centos-7-7-41 ~]# podman run -ti -d --name web httpd 72f4b9dde39323f8a98188ba96c36552e3d98f30931256504aca71d3024fe01b [root@fastvm-centos-7-7-41 ~]# 컨테이너 구동 확인 [root@fastvm-centos-7-7-41 ~]# podman ps --help List containers Description:  Prints out information about the containers Usage:  podman ps [flags] 위와 같은 구문을 통해 확인이 가능하며, 아래와 같이 컨테이너의 상태를 확인 할 수 있습니다.\n[root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72f4b9dde393 docker.io/library/httpd:latest httpd-foreground 4 seconds ago Up 3 seconds ago web ea2aabb1fe18 docker.io/library/httpd:latest httpd-foreground 20 seconds ago Exited (0) 17 seconds ago relaxed_hypatia 컨테이너 중지 stop 이라는 옵션을 통해 컨테이너 중지가 가능하며 ps 구문을 통해 상태 확인이 가능합니다.\n[root@fastvm-centos-7-7-41 ~]# podman stop web 72f4b9dde39323f8a98188ba96c36552e3d98f30931256504aca71d3024fe01b  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72f4b9dde393 docker.io/library/httpd:latest httpd-foreground 51 seconds ago Exited (0) 2 seconds ago web ea2aabb1fe18 docker.io/library/httpd:latest httpd-foreground About a minute ago Exited (0) About a minute ago relaxed_hypatia 컨테이너 시작 중지된 컨테이너는 start 옵션을 통해 컨테이너 시작이 가능합니다.\n[root@fastvm-centos-7-7-41 ~]# podman start web web  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72f4b9dde393 docker.io/library/httpd:latest httpd-foreground About a minute ago Up 1 second ago web ea2aabb1fe18 docker.io/library/httpd:latest httpd-foreground About a minute ago Exited (0) About a minute ago relaxed_hypatia 컨테이너 이미지 확인 현재 Host 에 Pull 된 컨테이너 이미지를 확인 할 수 있습니다.\n[root@fastvm-centos-7-7-41 ~]# podman images REPOSITORY TAG IMAGE ID CREATED SIZE docker.io/library/httpd latest c5a012f9cf45 4 days ago 170 MB 컨테이너 이미지 Pull Red Hat registry 혹은 Docker Hub 의 컨테이너 이미지를 Pull 할 수 있습니다.\n[root@fastvm-centos-7-7-41 ~]# podman pull centos Trying to pull registry.access.redhat.com/centos...ERRO[0001] Error pulling image ref //registry.access.redhat.com/centos:latest: Error initializing source docker://registry.access.redhat.com/centos:latest: Error reading manifest latest in registry.access.redhat.com/centos: name unknown: Repo not found Failed Trying to pull docker.io/library/centos...Getting image source signatures Copying blob 8a29a15cefae done Copying config 470671670c done Writing manifest to image destination Storing signatures 470671670cac686c7cf0081e0b37da2e9f4f768ddc5f6a26102ccd1c6954c1ee  [root@fastvm-centos-7-7-41 ~]# podman images REPOSITORY TAG IMAGE ID CREATED SIZE docker.io/library/httpd latest c5a012f9cf45 5 days ago 170 MB docker.io/library/centos latest 470671670cac 6 weeks ago 245 MB 컨테이너 삭제 아래와 같이 rm 옵션을 이용하여 컨테이너를 삭제할 수 있습니다.\n[root@fastvm-centos-7-7-41 ~]# podman rm relaxed_hypatia ea2aabb1fe18e2937131bc76ae7dee0d95d92334865ff2938c67752142c27c21  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72f4b9dde393 docker.io/library/httpd:latest httpd-foreground 2 minutes ago Up About a minute ago web 컨테이너 Port Mapping 지금까지 기본 사용법을 보면 Docker 와 매우 흡사한 옵션 사용법입니다.\nPort Mapping 또한 마찬가지입니다.\n [root@fastvm-centos-7-7-41 ~]# podman run -ti -d -p 80:80 --name web httpd 07e14dc469e6247c181daeac723c116a142f466a0273c638f4724bb75a173cbc  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 07e14dc469e6 docker.io/library/httpd:latest httpd-foreground 4 seconds ago Up 3 seconds ago 0.0.0.0:80-80/tcp web  [root@fastvm-centos-7-7-41 ~]# curl 127.0.0.1 It works! 위와 같이 -p 옵션이 동일하게 존재하며 사용이 가능합니다.\n이처럼 명령어들이 Docker 에서 사용하던 방식과 동일합니다.\n처음 접하거나 Docker 만 사용하던 사용자도 쉽게 접근이 가능합니다.\nPodman 에서만 제공되는 기능 Podman 에는 Podman 에서만 제공되는 특별한 기능이 추가되어 있습니다.\nsystemd generate 제공 containerd 로 하나로 관리되던 Docker 와 달리 각 프로세서로 생성이 되는 Podman 은 각 컨테이너 별로 systemd 의 서비스 파일을 생성하여 관리를 할 수 있습니다.\ngenerate 구문 [root@fastvm-centos-7-7-41 ~]# podman generate --help Generate structured data based for a containers and pods Usage:  podman generate [command] Available Commands:  kube Generate Kubernetes pod YAML from a container or pod  systemd Generate a systemd unit file for a Podman container 생성 방법  일반 컨테이너 생성  [root@fastvm-centos-7-7-41 ~]# podman run -d --name redis_server -p 6379:6379 redis systemd 서비스 파일 생성  [Unit] Description=Redis container  [Service] Restart=always ExecStart=/usr/bin/podman start -a redis_server ExecStop=/usr/bin/podman stop -t 2 redis_server  [Install] WantedBy=local.target 위와 같이 /etc/systemd/system/redis_server.service 파일을 생성하거나,\n[root@fastvm-centos-7-7-41 system]# podman generate systemd redis_server  /etc/systemd/system/redis_server.service  [root@fastvm-centos-7-7-41 system]# cat redis_server.service [Unit] Description=7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 Podman Container [Service] Restart=on-failure ExecStart=/usr/bin/podman start 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 ExecStop=/usr/bin/podman stop -t 10 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 KillMode=none Type=forking PIDFile=/var/lib/containers/storage/overlay-containers/7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3/userdata/7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3.pid [Install] WantedBy=multi-user.target 위와 같이 generate 옵션을 통해 서비스 파일을 생성하고 Start 구문 및 Stop 구문, 기타 옵션을 컨테이너 실행 상황에 맞게 수정합니다.\nsystemd 를 이용하여 컨테이너 관리  컨테이너 시작 [root@fastvm-centos-7-7-41 ~]# systemctl start redis-container.service  [root@fastvm-centos-7-7-41 ~]# systemctl status redis-container.service ● redis-container.service - Redis container  Loaded: loaded (/etc/systemd/system/redis-container.service; enabled; vendor preset: disabled)  Active: active (running) since Mon 2020-03-02 21:34:15 KST; 3s ago  Main PID: 6508 (podman)  CGroup: /system.slice/redis-container.service  └─6508 /usr/bin/podman start -a redis_server  Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:C 02 Mar 2020 12:34:16.140 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:C 02 Mar 2020 12:34:16.140 # Redis version=5.0.7, bits=64, commit=00000000, modified=0, pid=1, just started Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:C 02 Mar 2020 12:34:16.140 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.141 * Running mode=standalone, port=6379. Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.141 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128. Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.141 # Server initialized Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.141 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and th...this to take effect. Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.141 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never  ... Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.142 * DB loaded from disk: 0.000 seconds Mar 02 21:34:16 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:16.142 * Ready to accept connections Hint: Some lines were ellipsized, use -l to show in full.  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 7eac708eb651 docker.io/library/redis:latest docker-entrypoint... 6 hours ago Up 8 seconds ago 0.0.0.0:6379-6379/tcp redis_server 컨테이너 중지 [root@fastvm-centos-7-7-41 ~]# systemctl stop redis-container.service  [root@fastvm-centos-7-7-41 ~]# systemctl status redis-container.service ● redis-container.service - Redis container  Loaded: loaded (/etc/systemd/system/redis-container.service; enabled; vendor preset: disabled)  Active: inactive (dead)  Mar 02 21:34:33 fastvm-centos-7-7-41 podman[6508]: 1:signal-handler (1583152473) Received SIGTERM scheduling shutdown... Mar 02 21:34:33 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:33.902 # User requested shutdown... Mar 02 21:34:33 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:33.902 * Saving the final RDB snapshot before exiting. Mar 02 21:34:33 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:33.904 * DB saved on disk Mar 02 21:34:33 fastvm-centos-7-7-41 podman[6508]: 1:M 02 Mar 2020 12:34:33.904 # Redis is now ready to exit, bye bye... Mar 02 21:34:34 fastvm-centos-7-7-41 podman[6625]: 2020-03-02 21:34:34.0168744 +0900 KST m=+0.172658043 container died 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 (image=docker.io/library/redis:latest, name=redis_server) Mar 02 21:34:34 fastvm-centos-7-7-41 podman[6625]: 2020-03-02 21:34:34.018181553 +0900 KST m=+0.173965114 container stop 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 (image=docker.io/library/redis:latest, name=redis_server) Mar 02 21:34:34 fastvm-centos-7-7-41 podman[6625]: 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 Mar 02 21:34:34 fastvm-centos-7-7-41 podman[6508]: time=\"2020-03-02T21:34:34+09:00\" level=error msg=\"Error forwarding signal 15 to container 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3\": can only kill running containers. 7eac708eb65114d7f37773315f65... Mar 02 21:34:34 fastvm-centos-7-7-41 systemd[1]: Stopped Redis container. Hint: Some lines were ellipsized, use -l to show in full.  [root@fastvm-centos-7-7-41 ~]# podman ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 7eac708eb651 docker.io/library/redis:latest docker-entrypoint... 6 hours ago Exited (0) 6 seconds ago 0.0.0.0:6379-6379/tcp redis_server kubernetes yaml generate 제공 Kubernetes 에서 바로 사용이 가능한 Yaml 파일 형식을 생성합니다.\n Yaml 파일 생성  [root@fastvm-centos-7-7-41 ~]# podman generate kube web # Generation of Kubernetes YAML is still under development! # # Save the output of this file and use kubectl create -f to import # it into Kubernetes. # # Created with podman-1.4.4 apiVersion: v1 kind: Pod metadata:  creationTimestamp: \"2020-03-01T12:53:22Z\"  labels:  app: web  name: web spec:  containers:  - command:  - httpd-foreground  env:  - name: PATH  value: /usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin  - name: TERM  value: xterm  - name: HOSTNAME  - name: container  value: podman  - name: HTTPD_PATCHES  - name: HTTPD_PREFIX  value: /usr/local/apache2  - name: HTTPD_VERSION  value: 2.4.41  - name: HTTPD_SHA256  value: 133d48298fe5315ae9366a0ec66282fa4040efa5d566174481077ade7d18ea40  image: docker.io/library/httpd:latest  name: web  ports:  - containerPort: 80  hostPort: 80  protocol: TCP  resources: {}  securityContext:  allowPrivilegeEscalation: true  capabilities: {}  privileged: false  readOnlyRootFilesystem: false  stdin: true  tty: true  workingDir: /usr/local/apache2 status: {} Kubernetes 에 배포  [root@master1 ~]# kubectl create -f podman-gen-web.yml pod/web created  [root@master1 ~]# kubectl get pod NAME READY STATUS RESTARTS AGE web 1/1 Running 0 5s Pod 상세 내용 확인  [root@master1 ~]# kubectl describe pod web Name: web Namespace: default Priority: 0 Node: worker2.example.com/192.168.200.55 Start Time: Sun, 01 Mar 2020 21:57:52 +0900 Labels: app=web Annotations:  Status: Running IP: 10.233.95.5 Containers:  web:  Container ID: docker://b98767502847b34d4653a9a89dc7284b9307d5e02afe7ed1d4118bdf43e7689f  Image: docker.io/library/httpd:latest  Image ID: docker-pullable://httpd@sha256:946c54069130dbf136903fe658fe7d113bd8db8004de31282e20b262a3e106fb  Port: 80/TCP  Host Port: 80/TCP  Command:  httpd-foreground  State: Running  Started: Sun, 01 Mar 2020 21:57:56 +0900  Ready: True  Restart Count: 0  Environment:  PATH: /usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin  TERM: xterm  HOSTNAME:  container: podman  HTTPD_PATCHES:  HTTPD_PREFIX: /usr/local/apache2  HTTPD_VERSION: 2.4.41  HTTPD_SHA256: 133d48298fe5315ae9366a0ec66282fa4040efa5d566174481077ade7d18ea40  Mounts:  /var/run/secrets/kubernetes.io/serviceaccount from default-token-lr7dh (ro) Conditions:  Type Status  Initialized True  Ready True  ContainersReady True  PodScheduled True Volumes:  default-token-lr7dh:  Type: Secret (a volume populated by a Secret)  SecretName: default-token-lr7dh  Optional: false QoS Class: BestEffort Node-Selectors:  Tolerations: node.kubernetes.io/not-ready:NoExecute for 300s  node.kubernetes.io/unreachable:NoExecute for 300s Events:  Type Reason Age From Message  ---- ------ ---- ---- -------  Normal Scheduled 100s default-scheduler Successfully assigned default/web to worker2.example.com  Normal Pulling 99s kubelet, worker2.example.com Pulling image \"docker.io/library/httpd:latest\"  Normal Pulled 96s kubelet, worker2.example.com Successfully pulled image \"docker.io/library/httpd:latest\"  Normal Created 96s kubelet, worker2.example.com Created container web  Normal Started 96s kubelet, worker2.example.com Started container web 참고 자료  https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_containers_as_systemd_services_with_podman https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/8/html/8.0_release_notes/notable_changes_to_containers https://podman.io/getting-started/ 사진 출처 1 : https://developers.redhat.com/blog/2019/02/21/podman-and-buildah-for-docker-users/ 사진 출처 2 : https://www.redhat.com/en/blog/why-red-hat-investing-cri-o-and-podman  ",
  "wordCount" : "1761",
  "inLanguage": "en",
  "datePublished": "2020-03-02T00:00:00Z",
  "dateModified": "2020-03-02T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "chhanz"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chhanz88.github.io/post/2020-03-02-podman/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "chhanz 기술 블로그\n",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chhanz88.github.io/assets/favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://chhanz88.github.io" accesskey="h" title="chhanz 기술 블로그
 (Alt + H)">chhanz 기술 블로그
</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://chhanz88.github.io/categories/" title="categories">
                    <span>categories</span>
                </a>
            </li>
            <li>
                <a href="https://chhanz88.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      [Container] Podman 설치 및 사용법
    </h1>
    <div class="post-description">
       
    </div>
    <div class="post-meta"><span title='2020-03-02 00:00:00 +0000 UTC'>March 2, 2020</span>&nbsp;·&nbsp;chhanz

</div>
  </header> 
  <div class="post-content"><!-- raw HTML omitted -->
<h1 id="podman-이란">Podman 이란?<a hidden class="anchor" aria-hidden="true" href="#podman-이란">#</a></h1>
<p>Red Hat Enterprise Linux 8 / CentOS 8 부터는 <code>Docker</code> 대신 <code>Podman</code> 이라는 도구를 제공합니다.<br>
<code>Podman</code> 은 <code>Docker</code> 와 동일하게 단일 노드에서 pod, 컨테이너 이미지 및 컨테이너를 관리합니다.<br>
Pod 라고 하는 컨테이너 및 컨테이너 그룹을 관리할 수 있는 libpod 라이브러리를 기반으로 합니다.</p>
<ul>
<li><a href="https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/8/html/8.0_release_notes/notable_changes_to_containers">RHEL 8 Release Note</a></li>
</ul>
<p>이번 포스팅에서는 <code>Podman</code> 의 설치 및 기본 사용법에 대해 확인 해보겠습니다.</p>
<h1 id="docker-vs-podman"><code>Docker</code> VS <code>Podman</code><a hidden class="anchor" aria-hidden="true" href="#docker-vs-podman">#</a></h1>
<p><code>Docker</code> 와 <code>Podman</code> 은 아래와 같이 &ldquo;컨테이너 Cli 가 컨테이너를 어떻게 생성하냐&rdquo; 의 차이가 있습니다.</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->- Docker 구조 -<!-- raw HTML omitted --><br>
<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->- Podman 구조 -<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>위와 같은 구조적인 차이로 인해 예전에 <code>Docker</code> 에서는 <code>systemd</code> 를 이용하여 <code>docker</code> daemon을 재시작 하거나 중지를 하면 운영중인 컨테이너에 영향을 주었습니다.<br>
하지만 <code>Podman</code> 은 <code>Docker</code> 와 달리 서로 간섭이 없는 컨테이너를 생성 할 수 있습니다.<br>
일종의 PID 가 다른 프로세서라고 생각하면 됩니다.</p>
<h1 id="podman-설치">Podman 설치<a hidden class="anchor" aria-hidden="true" href="#podman-설치">#</a></h1>
<p><code>Podman</code> 설치는 <code>Docker</code> 설치 만큼 쉽습니다.<br>
참고로 현재 CentOS 7 에서는 <code>Docker</code> 와 <code>Podman</code> 을 동시에 지원하니 기존에 <code>Docker</code> 로 쓰던 컨테이너를 <code>Podman</code> 으로도 전환이 가능합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>[root@fastvm-centos-7-7-41 ~]# yum -y install podman
</span></span></code></pre></div><p>위와 같이 명령 수행만 하면 설치는 완료됩니다.<br>
설치만 보면 <code>Docker</code> 보다 쉽습니다. 특이한 점은 <code>systemd</code> 설정 할 필요가 없습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl list-units | grep -i pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</span></span></code></pre></div><p>위와 같이 <code>Docker</code> 와 다르게 <code>systemd</code> 로 서비스를 시작할 필요가 없습니다.</p>
<h2 id="podman-기본-사용법">Podman 기본 사용법<a hidden class="anchor" aria-hidden="true" href="#podman-기본-사용법">#</a></h2>
<p><code>Podman</code> 의 기본 사용법을 알아보겠습니다.</p>
<h3 id="컨테이너-생성">컨테이너 생성<a hidden class="anchor" aria-hidden="true" href="#컨테이너-생성">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>[root@fastvm-centos-7-7-41 ~]# podman run --help
</span></span><span style="display:flex;"><span>Run a command in a new container
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Description:
</span></span><span style="display:flex;"><span>  Runs a command in a new container from the given image
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Usage:
</span></span><span style="display:flex;"><span>  podman run [flags] IMAGE [COMMAND [ARG...]]
</span></span></code></pre></div><p>위와 같은 구문을 이용하여 아래와 같이 컨테이너 생성이 가능합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman run -ti -d --name web httpd</span>
</span></span><span style="display:flex;"><span>72f4b9dde39323f8a98188ba96c36552e3d98f30931256504aca71d3024fe01b
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</span></span></code></pre></div><h3 id="컨테이너-구동-확인">컨테이너 구동 확인<a hidden class="anchor" aria-hidden="true" href="#컨테이너-구동-확인">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>[root@fastvm-centos-7-7-41 ~]# podman ps --help
</span></span><span style="display:flex;"><span>List containers
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Description:
</span></span><span style="display:flex;"><span>  Prints out information about the containers
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Usage:
</span></span><span style="display:flex;"><span>  podman ps [flags]
</span></span></code></pre></div><p>위와 같은 구문을 통해 확인이 가능하며, 아래와 같이 컨테이너의 상태를 확인 할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND           CREATED         STATUS                     PORTS  NAMES
</span></span><span style="display:flex;"><span>72f4b9dde393  docker.io/library/httpd:latest  httpd-foreground  <span style="color:#ae81ff">4</span> seconds ago   Up <span style="color:#ae81ff">3</span> seconds ago                  web
</span></span><span style="display:flex;"><span>ea2aabb1fe18  docker.io/library/httpd:latest  httpd-foreground  <span style="color:#ae81ff">20</span> seconds ago  Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">17</span> seconds ago         relaxed_hypatia
</span></span></code></pre></div><h3 id="컨테이너-중지">컨테이너 중지<a hidden class="anchor" aria-hidden="true" href="#컨테이너-중지">#</a></h3>
<p><code>stop</code> 이라는 옵션을 통해 컨테이너 중지가 가능하며 <code>ps</code> 구문을 통해 상태 확인이 가능합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman stop web</span>
</span></span><span style="display:flex;"><span>72f4b9dde39323f8a98188ba96c36552e3d98f30931256504aca71d3024fe01b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND           CREATED             STATUS                         PORTS  NAMES
</span></span><span style="display:flex;"><span>72f4b9dde393  docker.io/library/httpd:latest  httpd-foreground  <span style="color:#ae81ff">51</span> seconds ago      Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span> seconds ago              web
</span></span><span style="display:flex;"><span>ea2aabb1fe18  docker.io/library/httpd:latest  httpd-foreground  About a minute ago  Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> About a minute ago         relaxed_hypatia
</span></span></code></pre></div><h3 id="컨테이너-시작">컨테이너 시작<a hidden class="anchor" aria-hidden="true" href="#컨테이너-시작">#</a></h3>
<p>중지된 컨테이너는 <code>start</code> 옵션을 통해 컨테이너 시작이 가능합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman start web</span>
</span></span><span style="display:flex;"><span>web
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND           CREATED             STATUS                         PORTS  NAMES
</span></span><span style="display:flex;"><span>72f4b9dde393  docker.io/library/httpd:latest  httpd-foreground  About a minute ago  Up <span style="color:#ae81ff">1</span> second ago                       web
</span></span><span style="display:flex;"><span>ea2aabb1fe18  docker.io/library/httpd:latest  httpd-foreground  About a minute ago  Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> About a minute ago         relaxed_hypatia
</span></span></code></pre></div><h3 id="컨테이너-이미지-확인">컨테이너 이미지 확인<a hidden class="anchor" aria-hidden="true" href="#컨테이너-이미지-확인">#</a></h3>
<p>현재 Host 에 Pull 된 컨테이너 이미지를 확인 할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman images</span>
</span></span><span style="display:flex;"><span>REPOSITORY                TAG      IMAGE ID       CREATED      SIZE
</span></span><span style="display:flex;"><span>docker.io/library/httpd   latest   c5a012f9cf45   <span style="color:#ae81ff">4</span> days ago   <span style="color:#ae81ff">170</span> MB
</span></span></code></pre></div><h3 id="컨테이너-이미지-pull">컨테이너 이미지 Pull<a hidden class="anchor" aria-hidden="true" href="#컨테이너-이미지-pull">#</a></h3>
<p>Red Hat registry 혹은 Docker Hub 의 컨테이너 이미지를 Pull 할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman pull centos</span>
</span></span><span style="display:flex;"><span>Trying to pull registry.access.redhat.com/centos...ERRO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Error pulling image ref //registry.access.redhat.com/centos:latest: Error initializing source docker://registry.access.redhat.com/centos:latest: Error reading manifest latest in registry.access.redhat.com/centos: name unknown: Repo not found
</span></span><span style="display:flex;"><span>Failed
</span></span><span style="display:flex;"><span>Trying to pull docker.io/library/centos...Getting image source signatures
</span></span><span style="display:flex;"><span>Copying blob 8a29a15cefae <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>Copying config 470671670c <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>Writing manifest to image destination
</span></span><span style="display:flex;"><span>Storing signatures
</span></span><span style="display:flex;"><span>470671670cac686c7cf0081e0b37da2e9f4f768ddc5f6a26102ccd1c6954c1ee
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman images</span>
</span></span><span style="display:flex;"><span>REPOSITORY                 TAG      IMAGE ID       CREATED       SIZE
</span></span><span style="display:flex;"><span>docker.io/library/httpd    latest   c5a012f9cf45   <span style="color:#ae81ff">5</span> days ago    <span style="color:#ae81ff">170</span> MB
</span></span><span style="display:flex;"><span>docker.io/library/centos   latest   470671670cac   <span style="color:#ae81ff">6</span> weeks ago   <span style="color:#ae81ff">245</span> MB
</span></span></code></pre></div><h3 id="컨테이너-삭제">컨테이너 삭제<a hidden class="anchor" aria-hidden="true" href="#컨테이너-삭제">#</a></h3>
<p>아래와 같이 <code>rm</code> 옵션을 이용하여 컨테이너를 삭제할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman rm relaxed_hypatia</span>
</span></span><span style="display:flex;"><span>ea2aabb1fe18e2937131bc76ae7dee0d95d92334865ff2938c67752142c27c21
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND           CREATED        STATUS                 PORTS  NAMES
</span></span><span style="display:flex;"><span>72f4b9dde393  docker.io/library/httpd:latest  httpd-foreground  <span style="color:#ae81ff">2</span> minutes ago  Up About a minute ago         web
</span></span></code></pre></div><h3 id="컨테이너-port-mapping">컨테이너 Port Mapping<a hidden class="anchor" aria-hidden="true" href="#컨테이너-port-mapping">#</a></h3>
<p>지금까지 기본 사용법을 보면 <code>Docker</code> 와 매우 흡사한 옵션 사용법입니다.<br>
Port Mapping 또한 마찬가지입니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman run -ti -d -p 80:80 --name web httpd</span>
</span></span><span style="display:flex;"><span>07e14dc469e6247c181daeac723c116a142f466a0273c638f4724bb75a173cbc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND           CREATED        STATUS            PORTS               NAMES
</span></span><span style="display:flex;"><span>07e14dc469e6  docker.io/library/httpd:latest  httpd-foreground  <span style="color:#ae81ff">4</span> seconds ago  Up <span style="color:#ae81ff">3</span> seconds ago  0.0.0.0:80-&gt;80/tcp  web
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># curl 127.0.0.1</span>
</span></span><span style="display:flex;"><span>&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
</span></span></code></pre></div><p>위와 같이 <code>-p</code> 옵션이 동일하게 존재하며 사용이 가능합니다.</p>
<p>이처럼 명령어들이 <code>Docker</code> 에서 사용하던 방식과 동일합니다.<br>
처음 접하거나 <code>Docker</code> 만 사용하던 사용자도 쉽게 접근이 가능합니다.</p>
<h1 id="podman-에서만-제공되는-기능"><code>Podman</code> 에서만 제공되는 기능<a hidden class="anchor" aria-hidden="true" href="#podman-에서만-제공되는-기능">#</a></h1>
<p><code>Podman</code> 에는 <code>Podman</code> 에서만 제공되는 특별한 기능이 추가되어 있습니다.</p>
<h2 id="systemd-generate-제공"><code>systemd</code> generate 제공<a hidden class="anchor" aria-hidden="true" href="#systemd-generate-제공">#</a></h2>
<p><code>containerd</code> 로 하나로 관리되던 <code>Docker</code> 와 달리 각 프로세서로 생성이 되는 <code>Podman</code> 은 각 컨테이너 별로 <code>systemd</code> 의 서비스 파일을 생성하여 관리를 할 수 있습니다.</p>
<h3 id="generate-구문">generate 구문<a hidden class="anchor" aria-hidden="true" href="#generate-구문">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>[root@fastvm-centos-7-7-41 ~]# podman generate --help
</span></span><span style="display:flex;"><span>Generate structured data based for a containers and pods
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Usage:
</span></span><span style="display:flex;"><span>  podman generate [command]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>Available Commands:
</span></span><span style="display:flex;"><span>  kube        Generate Kubernetes pod YAML from a container or pod
</span></span><span style="display:flex;"><span>  systemd     Generate a systemd unit file for a Podman container
</span></span></code></pre></div><h3 id="생성-방법">생성 방법<a hidden class="anchor" aria-hidden="true" href="#생성-방법">#</a></h3>
<ol>
<li>일반 컨테이너 생성</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman run -d --name redis_server -p 6379:6379 redis</span>
</span></span></code></pre></div><ol start="2">
<li><code>systemd</code> 서비스 파일 생성</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Description<span style="color:#f92672">=</span>Redis container
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Restart<span style="color:#f92672">=</span>always
</span></span><span style="display:flex;"><span>ExecStart<span style="color:#f92672">=</span>/usr/bin/podman start -a redis_server
</span></span><span style="display:flex;"><span>ExecStop<span style="color:#f92672">=</span>/usr/bin/podman stop -t <span style="color:#ae81ff">2</span> redis_server
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#f92672">=</span>local.target
</span></span></code></pre></div><p>위와 같이 <code>/etc/systemd/system/redis_server.service</code> 파일을 생성하거나,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 system<span style="color:#f92672">]</span><span style="color:#75715e"># podman generate systemd redis_server  &gt; /etc/systemd/system/redis_server.service</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 system<span style="color:#f92672">]</span><span style="color:#75715e"># cat redis_server.service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Description<span style="color:#f92672">=</span>7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 Podman Container
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Restart<span style="color:#f92672">=</span>on-failure
</span></span><span style="display:flex;"><span>ExecStart<span style="color:#f92672">=</span>/usr/bin/podman start 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3
</span></span><span style="display:flex;"><span>ExecStop<span style="color:#f92672">=</span>/usr/bin/podman stop -t <span style="color:#ae81ff">10</span> 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3
</span></span><span style="display:flex;"><span>KillMode<span style="color:#f92672">=</span>none
</span></span><span style="display:flex;"><span>Type<span style="color:#f92672">=</span>forking
</span></span><span style="display:flex;"><span>PIDFile<span style="color:#f92672">=</span>/var/lib/containers/storage/overlay-containers/7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3/userdata/7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3.pid
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#f92672">=</span>multi-user.target
</span></span></code></pre></div><p>위와 같이 <code>generate</code> 옵션을 통해 서비스 파일을 생성하고 Start 구문 및 Stop 구문, 기타 옵션을 컨테이너 실행 상황에 맞게 수정합니다.</p>
<ol start="3">
<li><code>systemd</code> 를 이용하여 컨테이너 관리</li>
</ol>
<h3 id="컨테이너-시작-1">컨테이너 시작<a hidden class="anchor" aria-hidden="true" href="#컨테이너-시작-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl start redis-container.service</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl status redis-container.service</span>
</span></span><span style="display:flex;"><span>● redis-container.service - Redis container
</span></span><span style="display:flex;"><span>   Loaded: loaded <span style="color:#f92672">(</span>/etc/systemd/system/redis-container.service; enabled; vendor preset: disabled<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   Active: active <span style="color:#f92672">(</span>running<span style="color:#f92672">)</span> since Mon 2020-03-02 21:34:15 KST; 3s ago
</span></span><span style="display:flex;"><span> Main PID: <span style="color:#ae81ff">6508</span> <span style="color:#f92672">(</span>podman<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   CGroup: /system.slice/redis-container.service
</span></span><span style="display:flex;"><span>           └─6508 /usr/bin/podman start -a redis_server
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:C <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.140 <span style="color:#75715e"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:C <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.140 <span style="color:#75715e"># Redis version=5.0.7, bits=64, commit=00000000, modified=0, pid=1, just started</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:C <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.140 <span style="color:#75715e"># Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.141 * Running mode<span style="color:#f92672">=</span>standalone, port<span style="color:#f92672">=</span>6379.
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.141 <span style="color:#75715e"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.141 <span style="color:#75715e"># Server initialized</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.141 <span style="color:#75715e"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and th...this to take effect.</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.141 <span style="color:#75715e"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; ...</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.142 * DB loaded from disk: 0.000 seconds
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:16 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:16.142 * Ready to accept connections
</span></span><span style="display:flex;"><span>Hint: Some lines were ellipsized, use -l to show in full.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND               CREATED      STATUS            PORTS                   NAMES
</span></span><span style="display:flex;"><span>7eac708eb651  docker.io/library/redis:latest  docker-entrypoint...  <span style="color:#ae81ff">6</span> hours ago  Up <span style="color:#ae81ff">8</span> seconds ago  0.0.0.0:6379-&gt;6379/tcp  redis_server
</span></span></code></pre></div><h3 id="컨테이너-중지-1">컨테이너 중지<a hidden class="anchor" aria-hidden="true" href="#컨테이너-중지-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl stop redis-container.service</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl status redis-container.service</span>
</span></span><span style="display:flex;"><span>● redis-container.service - Redis container
</span></span><span style="display:flex;"><span>   Loaded: loaded <span style="color:#f92672">(</span>/etc/systemd/system/redis-container.service; enabled; vendor preset: disabled<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   Active: inactive <span style="color:#f92672">(</span>dead<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:33 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:signal-handler <span style="color:#f92672">(</span>1583152473<span style="color:#f92672">)</span> Received SIGTERM scheduling shutdown...
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:33 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:33.902 <span style="color:#75715e"># User requested shutdown...</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:33 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:33.902 * Saving the final RDB snapshot before exiting.
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:33 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:33.904 * DB saved on disk
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:33 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: 1:M <span style="color:#ae81ff">02</span> Mar <span style="color:#ae81ff">2020</span> 12:34:33.904 <span style="color:#75715e"># Redis is now ready to exit, bye bye...</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:34 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6625<span style="color:#f92672">]</span>: 2020-03-02 21:34:34.0168744 +0900 KST m<span style="color:#f92672">=</span>+0.172658043 container died 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 <span style="color:#f92672">(</span>image<span style="color:#f92672">=</span>docker.io/library/redis:latest, name<span style="color:#f92672">=</span>redis_server<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:34 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6625<span style="color:#f92672">]</span>: 2020-03-02 21:34:34.018181553 +0900 KST m<span style="color:#f92672">=</span>+0.173965114 container stop 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3 <span style="color:#f92672">(</span>image<span style="color:#f92672">=</span>docker.io/library/redis:latest, name<span style="color:#f92672">=</span>redis_server<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:34 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6625<span style="color:#f92672">]</span>: 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:34 fastvm-centos-7-7-41 podman<span style="color:#f92672">[</span>6508<span style="color:#f92672">]</span>: time<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2020-03-02T21:34:34+09:00&#34;</span> level<span style="color:#f92672">=</span>error msg<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Error forwarding signal 15 to container 7eac708eb65114d7f37773315f6565c718a440df3cc2211ace17e85cd9699bc3&#34;</span>: can only kill running containers. 7eac708eb65114d7f37773315f65...
</span></span><span style="display:flex;"><span>Mar <span style="color:#ae81ff">02</span> 21:34:34 fastvm-centos-7-7-41 systemd<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>: Stopped Redis container.
</span></span><span style="display:flex;"><span>Hint: Some lines were ellipsized, use -l to show in full.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                           COMMAND               CREATED      STATUS                    PORTS                   NAMES
</span></span><span style="display:flex;"><span>7eac708eb651  docker.io/library/redis:latest  docker-entrypoint...  <span style="color:#ae81ff">6</span> hours ago  Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">6</span> seconds ago  0.0.0.0:6379-&gt;6379/tcp  redis_server
</span></span></code></pre></div><h3 id="kubernetes-yaml-generate-제공"><code>kubernetes yaml</code> generate 제공<a hidden class="anchor" aria-hidden="true" href="#kubernetes-yaml-generate-제공">#</a></h3>
<p>Kubernetes 에서 바로 사용이 가능한 <code>Yaml</code> 파일 형식을 생성합니다.</p>
<ol>
<li><code>Yaml</code> 파일 생성</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@fastvm-centos-7-7-41 ~<span style="color:#f92672">]</span><span style="color:#75715e"># podman generate kube web</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generation of Kubernetes YAML is still under development!</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Save the output of this file and use kubectl create -f to import</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># it into Kubernetes.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Created with podman-1.4.4</span>
</span></span><span style="display:flex;"><span>apiVersion: v1
</span></span><span style="display:flex;"><span>kind: Pod
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  creationTimestamp: <span style="color:#e6db74">&#34;2020-03-01T12:53:22Z&#34;</span>
</span></span><span style="display:flex;"><span>  labels:
</span></span><span style="display:flex;"><span>    app: web
</span></span><span style="display:flex;"><span>  name: web
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>  containers:
</span></span><span style="display:flex;"><span>  - command:
</span></span><span style="display:flex;"><span>    - httpd-foreground
</span></span><span style="display:flex;"><span>    env:
</span></span><span style="display:flex;"><span>    - name: PATH
</span></span><span style="display:flex;"><span>      value: /usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
</span></span><span style="display:flex;"><span>    - name: TERM
</span></span><span style="display:flex;"><span>      value: xterm
</span></span><span style="display:flex;"><span>    - name: HOSTNAME
</span></span><span style="display:flex;"><span>    - name: container
</span></span><span style="display:flex;"><span>      value: podman
</span></span><span style="display:flex;"><span>    - name: HTTPD_PATCHES
</span></span><span style="display:flex;"><span>    - name: HTTPD_PREFIX
</span></span><span style="display:flex;"><span>      value: /usr/local/apache2
</span></span><span style="display:flex;"><span>    - name: HTTPD_VERSION
</span></span><span style="display:flex;"><span>      value: 2.4.41
</span></span><span style="display:flex;"><span>    - name: HTTPD_SHA256
</span></span><span style="display:flex;"><span>      value: 133d48298fe5315ae9366a0ec66282fa4040efa5d566174481077ade7d18ea40
</span></span><span style="display:flex;"><span>    image: docker.io/library/httpd:latest
</span></span><span style="display:flex;"><span>    name: web
</span></span><span style="display:flex;"><span>    ports:
</span></span><span style="display:flex;"><span>    - containerPort: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>      hostPort: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>      protocol: TCP
</span></span><span style="display:flex;"><span>    resources: <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>    securityContext:
</span></span><span style="display:flex;"><span>      allowPrivilegeEscalation: true
</span></span><span style="display:flex;"><span>      capabilities: <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>      privileged: false
</span></span><span style="display:flex;"><span>      readOnlyRootFilesystem: false
</span></span><span style="display:flex;"><span>    stdin: true
</span></span><span style="display:flex;"><span>    tty: true
</span></span><span style="display:flex;"><span>    workingDir: /usr/local/apache2
</span></span><span style="display:flex;"><span>status: <span style="color:#f92672">{}</span>
</span></span></code></pre></div><ol start="2">
<li>Kubernetes 에 배포</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@master1 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl create -f podman-gen-web.yml</span>
</span></span><span style="display:flex;"><span>pod/web created
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@master1 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl get pod</span>
</span></span><span style="display:flex;"><span>NAME   READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>web    1/1     Running   <span style="color:#ae81ff">0</span>          5s
</span></span></code></pre></div><ol start="3">
<li>Pod 상세 내용 확인</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@master1 ~<span style="color:#f92672">]</span><span style="color:#75715e"># kubectl describe pod web</span>
</span></span><span style="display:flex;"><span>Name:         web
</span></span><span style="display:flex;"><span>Namespace:    default
</span></span><span style="display:flex;"><span>Priority:     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Node:         worker2.example.com/192.168.200.55
</span></span><span style="display:flex;"><span>Start Time:   Sun, <span style="color:#ae81ff">01</span> Mar <span style="color:#ae81ff">2020</span> 21:57:52 +0900
</span></span><span style="display:flex;"><span>Labels:       app<span style="color:#f92672">=</span>web
</span></span><span style="display:flex;"><span>Annotations:  &lt;none&gt;
</span></span><span style="display:flex;"><span>Status:       Running
</span></span><span style="display:flex;"><span>IP:           10.233.95.5
</span></span><span style="display:flex;"><span>Containers:
</span></span><span style="display:flex;"><span>  web:
</span></span><span style="display:flex;"><span>    Container ID:  docker://b98767502847b34d4653a9a89dc7284b9307d5e02afe7ed1d4118bdf43e7689f
</span></span><span style="display:flex;"><span>    Image:         docker.io/library/httpd:latest
</span></span><span style="display:flex;"><span>    Image ID:      docker-pullable://httpd@sha256:946c54069130dbf136903fe658fe7d113bd8db8004de31282e20b262a3e106fb
</span></span><span style="display:flex;"><span>    Port:          80/TCP
</span></span><span style="display:flex;"><span>    Host Port:     80/TCP
</span></span><span style="display:flex;"><span>    Command:
</span></span><span style="display:flex;"><span>      httpd-foreground
</span></span><span style="display:flex;"><span>    State:          Running
</span></span><span style="display:flex;"><span>      Started:      Sun, <span style="color:#ae81ff">01</span> Mar <span style="color:#ae81ff">2020</span> 21:57:56 +0900
</span></span><span style="display:flex;"><span>    Ready:          True
</span></span><span style="display:flex;"><span>    Restart Count:  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    Environment:
</span></span><span style="display:flex;"><span>      PATH:           /usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
</span></span><span style="display:flex;"><span>      TERM:           xterm
</span></span><span style="display:flex;"><span>      HOSTNAME:
</span></span><span style="display:flex;"><span>      container:      podman
</span></span><span style="display:flex;"><span>      HTTPD_PATCHES:
</span></span><span style="display:flex;"><span>      HTTPD_PREFIX:   /usr/local/apache2
</span></span><span style="display:flex;"><span>      HTTPD_VERSION:  2.4.41
</span></span><span style="display:flex;"><span>      HTTPD_SHA256:   133d48298fe5315ae9366a0ec66282fa4040efa5d566174481077ade7d18ea40
</span></span><span style="display:flex;"><span>    Mounts:
</span></span><span style="display:flex;"><span>      /var/run/secrets/kubernetes.io/serviceaccount from default-token-lr7dh <span style="color:#f92672">(</span>ro<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Conditions:
</span></span><span style="display:flex;"><span>  Type              Status
</span></span><span style="display:flex;"><span>  Initialized       True
</span></span><span style="display:flex;"><span>  Ready             True
</span></span><span style="display:flex;"><span>  ContainersReady   True
</span></span><span style="display:flex;"><span>  PodScheduled      True
</span></span><span style="display:flex;"><span>Volumes:
</span></span><span style="display:flex;"><span>  default-token-lr7dh:
</span></span><span style="display:flex;"><span>    Type:        Secret <span style="color:#f92672">(</span>a volume populated by a Secret<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    SecretName:  default-token-lr7dh
</span></span><span style="display:flex;"><span>    Optional:    false
</span></span><span style="display:flex;"><span>QoS Class:       BestEffort
</span></span><span style="display:flex;"><span>Node-Selectors:  &lt;none&gt;
</span></span><span style="display:flex;"><span>Tolerations:     node.kubernetes.io/not-ready:NoExecute <span style="color:#66d9ef">for</span> 300s
</span></span><span style="display:flex;"><span>                 node.kubernetes.io/unreachable:NoExecute <span style="color:#66d9ef">for</span> 300s
</span></span><span style="display:flex;"><span>Events:
</span></span><span style="display:flex;"><span>  Type    Reason     Age   From                          Message
</span></span><span style="display:flex;"><span>  ----    ------     ----  ----                          -------
</span></span><span style="display:flex;"><span>  Normal  Scheduled  100s  default-scheduler             Successfully assigned default/web to worker2.example.com
</span></span><span style="display:flex;"><span>  Normal  Pulling    99s   kubelet, worker2.example.com  Pulling image <span style="color:#e6db74">&#34;docker.io/library/httpd:latest&#34;</span>
</span></span><span style="display:flex;"><span>  Normal  Pulled     96s   kubelet, worker2.example.com  Successfully pulled image <span style="color:#e6db74">&#34;docker.io/library/httpd:latest&#34;</span>
</span></span><span style="display:flex;"><span>  Normal  Created    96s   kubelet, worker2.example.com  Created container web
</span></span><span style="display:flex;"><span>  Normal  Started    96s   kubelet, worker2.example.com  Started container web
</span></span></code></pre></div><h1 id="참고-자료">참고 자료<a hidden class="anchor" aria-hidden="true" href="#참고-자료">#</a></h1>
<ul>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_containers_as_systemd_services_with_podman">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_containers_as_systemd_services_with_podman</a></li>
<li><a href="https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/8/html/8.0_release_notes/notable_changes_to_containers">https://access.redhat.com/documentation/ko-kr/red_hat_enterprise_linux/8/html/8.0_release_notes/notable_changes_to_containers</a></li>
<li><a href="https://podman.io/getting-started/">https://podman.io/getting-started/</a></li>
<li><a href="https://developers.redhat.com/blog/2019/02/21/podman-and-buildah-for-docker-users/">사진 출처 1 : https://developers.redhat.com/blog/2019/02/21/podman-and-buildah-for-docker-users/</a></li>
<li><a href="https://www.redhat.com/en/blog/why-red-hat-investing-cri-o-and-podman">사진 출처 2 : https://www.redhat.com/en/blog/why-red-hat-investing-cri-o-and-podman</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://chhanz88.github.io/tags/container/">container</a></li>
    </ul>
  </footer><script src="https://utteranc.es/client.js"
        repo="chhanz88/chhanz88.github.io"
        issue-term="title"
        label="question"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://chhanz88.github.io">chhanz 기술 블로그
</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
